<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguros - Club Gest</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" type="image/png" href="../img/ACG-paint-logo.png">
</head>
<body>
    <!-- HEADER -->
    <header class="header header-club">
        <div class="header-left">
            <img src="../img/ACG-small-logo.png" alt="Logo Club Gest" class="header-logo">
            <div>
                <h1>Club Gest</h1>
                <p class="header-subtitle">Gestión de Seguros</p>
            </div>
        </div>
        <div class="header-right">
            <span class="user-info">Admin: <strong>Club Deportivo</strong></span>
            <a href="../index.html" class="btn btn-small btn-danger">Salir</a>
        </div>
    </header>

    <!-- NAVBAR la forma mas visual esta en home.html-->
    <nav class="navbar-top">
        <a href="home.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>Inicio</a>
        <a href="convocatorias.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>Convocatorias</a>
        <a href="entrenamientos.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="5" cy="10" r="2.5"></circle><circle cx="19" cy="10" r="2.5"></circle><line x1="8" y1="10" x2="16" y2="10"></line><path d="M7 5v10M17 5v10"></path></svg>Entrenamientos</a>
        <a href="lesiones.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>Lesiones</a>
        <a href="seguros.html" class="nav-link active"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>Seguros</a>
        <a href="fichas.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 3H5c-1 0-2 1-2 2v14c0 1 1 2 2 2h14c1 0 2-1 2-2V5c0-1-1-2-2-2z"></path><path d="M9 7h6M9 11h6M9 15h2"></path></svg>Fichas</a>
    </nav>

    <!-- LAYOUT -->
    <div class="layout">
        <!-- Radios ocultos para paginación -->
        <input type="radio" id="seg-page1" name="seg-pagination" class="pagination-radio" checked>
        <input type="radio" id="seg-page2" name="seg-pagination" class="pagination-radio">
        <input type="radio" id="seg-page3" name="seg-pagination" class="pagination-radio">
        <input type="radio" id="seg-page4" name="seg-pagination" class="pagination-radio">
        <input type="radio" id="seg-page5" name="seg-pagination" class="pagination-radio">

        <!-- MAIN -->
        <main class="main">
            <div class="page-header">
                <h1><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>Gestión de Seguros</h1>
                <button class="btn btn-success">+ Nuevo Seguro</button>
            </div>

            <!-- Tabla de seguros -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Jugador</th>
                            <th>Nº Póliza</th>
                            <th>Aseguradora</th>
                            <th>Tipo Cobertura</th>
                            <th>Vigencia</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="segurosTable">
                        <tr><td colspan="7" style="text-align: center; padding: 2rem;">Cargando seguros...</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- Controles de paginación -->
            <div class="pagination-controls">
                <label for="seg-page1" class="btn btn-small btn-info pagination-btn">← Anterior</label>
                <span class="pagination-info">Página <strong id="paginaActualSeg">1</strong> de <strong id="totalPaginasSeg">1</strong></span>
                <label for="seg-page2" class="btn btn-small btn-info pagination-btn">Siguiente →</label>
            </div>

            <div class="table-info">
                <p>Total seguros registrados: <strong id="totalSeguros">0</strong></p>
            </div>
        </main>
    </div>

    <!-- FOOTER -->
    <!-- Pie de página con información de copyright y versión del sistema -->
    <footer class="footer">
        <p>&copy; 2025 Club Gest - Sistema de Gestión de Clubes Deportivos</p>
    </footer>

    <script>
        const registrosPorPagina = 10;
        let todosSeguros = [];

        // Datos mockup para seguros (demostración sin BD)
        const datosSeguros = [
            { jugador: 'Juan Pérez García', poliza: 'POL-2025-001', aseguradora: 'Mapfre Deportes', cobertura: 'Completa', vigencia: 'Hasta 30/06/2025', estado: 'Vigente' },
            { jugador: 'Carlos Ruiz López', poliza: 'POL-2025-002', aseguradora: 'Axa Seguros', cobertura: 'Completa', vigencia: 'Hasta 30/06/2025', estado: 'Vigente' },
            { jugador: 'Miguel Sánchez Romero', poliza: 'POL-2025-003', aseguradora: 'Generali', cobertura: 'Básica', vigencia: 'Hasta 31/12/2024', estado: 'Vence próximo' },
            { jugador: 'David Fernández Ruiz', poliza: 'POL-2025-004', aseguradora: 'Liberty Seguros', cobertura: 'Completa', vigencia: 'Hasta 30/06/2025', estado: 'Vigente' },
            { jugador: 'Antonio López García', poliza: 'POL-2025-005', aseguradora: 'Mapfre Deportes', cobertura: 'Premium', vigencia: 'Hasta 31/12/2025', estado: 'Vigente' },
            { jugador: 'Roberto Martín Sanz', poliza: 'POL-2025-006', aseguradora: 'Zurich', cobertura: 'Completa', vigencia: 'Hasta 30/04/2025', estado: 'Vence próximo' },
            { jugador: 'Francisco García López', poliza: 'POL-2025-007', aseguradora: 'Allianz', cobertura: 'Básica', vigencia: 'Hasta 31/03/2025', estado: 'Vence próximo' },
            { jugador: 'José María González', poliza: 'POL-2025-008', aseguradora: 'Axa Seguros', cobertura: 'Completa', vigencia: 'Hasta 30/06/2025', estado: 'Vigente' },
            { jugador: 'Luis Rodríguez Díaz', poliza: 'POL-2025-009', aseguradora: 'Mapfre Deportes', cobertura: 'Premium', vigencia: 'Hasta 31/12/2025', estado: 'Vigente' },
            { jugador: 'Andrés Martínez Blanco', poliza: 'POL-2025-010', aseguradora: 'Liberty Seguros', cobertura: 'Completa', vigencia: 'Hasta 30/06/2025', estado: 'Vigente' },
            { jugador: 'Pedro Jiménez Costa', poliza: 'POL-2025-011', aseguradora: 'Generali', cobertura: 'Básica', vigencia: 'Hasta 31/05/2025', estado: 'Vigente' },
            { jugador: 'Javier Sánchez Ruiz', poliza: 'POL-2025-012', aseguradora: 'Zurich', cobertura: 'Completa', vigencia: 'Hasta 30/06/2025', estado: 'Vigente' }
        ];

        function cargarSeguros() {
            try {
                todosSeguros = datosSeguros;
                generarFilasSeguros();
                document.getElementById('totalSeguros').textContent = todosSeguros.length;
                generarControlesSeguros();
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('segurosTable').innerHTML = '<tr><td colspan="7" style="text-align: center; color: red;">Error al cargar seguros</td></tr>';
            }
        }

        function generarFilasSeguros() {
            const tabla = document.getElementById('segurosTable');
            tabla.innerHTML = '';
            
            todosSeguros.forEach((item, index) => {
                const pagina = Math.floor(index / registrosPorPagina) + 1;
                const badgeEstado = item.estado === 'Vigente' ? 'badge-success' : 'badge-warning';
                
                const fila = `
                    <tr data-page="${pagina}">
                        <td><strong>${item.jugador}</strong></td>
                        <td>${item.poliza}</td>
                        <td>${item.aseguradora}</td>
                        <td>${item.cobertura}</td>
                        <td>${item.vigencia}</td>
                        <td><span class="badge ${badgeEstado}">${item.estado}</span></td>
                        <td>
                            <button class="btn-icon" title="Ver"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button>
                            <button class="btn-icon" title="Editar"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></button>
                            <button class="btn-icon" title="Eliminar"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></button>
                        </td>
                    </tr>
                `;
                tabla.innerHTML += fila;
            });
        }

        function generarControlesSeguros() {
            const totalPaginas = Math.ceil(todosSeguros.length / registrosPorPagina);
            const layout = document.querySelector('.layout');
            const currentRadios = document.querySelectorAll('[name="seg-pagination"]');
            
            if (currentRadios.length < totalPaginas) {
                for (let i = currentRadios.length; i < totalPaginas; i++) {
                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.id = `seg-page${i + 1}`;
                    radio.name = 'seg-pagination';
                    radio.className = 'pagination-radio';
                    layout.insertBefore(radio, document.querySelector('.main'));
                }
            }
            
            document.getElementById('totalPaginasSeg').textContent = totalPaginas;
            if (totalPaginas > 1) {
                document.querySelector('.pagination-controls').style.display = 'flex';
            }
        }

        // Cargar al iniciar
        cargarSeguros();
    </script>
</body>
</html>
