<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fichas de Jugadores - Club Gest</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header header-club">
        <div class="header-left">
            <h1>Club Gest</h1>
            <p class="header-subtitle">Fichas de Jugadores Registrados</p>
        </div>
        <div class="header-right">
            <span class="user-info">Admin: <strong>Club Deportivo</strong></span>
            <a href="../index.html" class="btn btn-small btn-danger">Salir</a>
        </div>
    </header>

    <!-- NAVBAR -->
    <nav class="navbar-top">
        <a href="home.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>Inicio</a>
        <a href="convocatorias.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>Convocatorias</a>
        <a href="entrenamientos.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="5" cy="10" r="2.5"></circle><circle cx="19" cy="10" r="2.5"></circle><line x1="8" y1="10" x2="16" y2="10"></line><path d="M7 5v10M17 5v10"></path></svg>Entrenamientos</a>
        <a href="lesiones.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>Lesiones</a>
        <a href="seguros.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>Seguros</a>
        <a href="fichas.html" class="nav-link active"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 3H5c-1 0-2 1-2 2v14c0 1 1 2 2 2h14c1 0 2-1 2-2V5c0-1-1-2-2-2z"></path><path d="M9 7h6M9 11h6M9 15h2"></path></svg>Fichas</a>
    </nav>

    <!-- LAYOUT -->
    <div class="layout-flex">
        <!-- MAIN -->
        <main class="main-content">
            <div class="page-header">
                <h1><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>Fichas de Jugadores</h1>
                <div class="filters">
                    <select class="filter-select">
                        <option>Todos los estados</option>
                        <option>Pendiente revisión</option>
                        <option>Aceptado</option>
                        <option>Rechazado</option>
                    </select>
                </div>
            </div>

            <!-- Grid de fichas -->
            <div class="fichas-grid" id="fichasGrid">
                <!-- Ficha 1 -->
                <div class="ficha-card">
                    <div class="ficha-header">
                        <h3>Juan Pérez García</h3>
                        <span class="badge badge-warning">Pendiente</span>
                    </div>
                    <div class="ficha-body">
                        <p><strong>Email:</strong> juan.perez@email.com</p>
                        <p><strong>Teléfono:</strong> 666 123 456</p>
                        <p><strong>Categoría:</strong> Senior</p>
                        <p><strong>Posición:</strong> Pilar</p>
                        <p><strong>Dorsal:</strong> 1</p>
                        <p><strong>Fecha registro:</strong> 07/12/2025</p>
                    </div>
                    <div class="ficha-actions">
                        <button class="btn btn-small btn-success" onclick="aceptarFicha(1)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>Aceptar</button>
                        <button class="btn btn-small btn-danger" onclick="rechazarFicha(1)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>Rechazar</button>
                        <button class="btn btn-small btn-info" onclick="verDetalles(1)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>Ver más</button>
                    </div>
                </div>

                <!-- Ficha 2 -->
                <div class="ficha-card">
                    <div class="ficha-header">
                        <h3>Carlos Ruiz López</h3>
                        <span class="badge badge-success">Aceptado</span>
                    </div>
                    <div class="ficha-body">
                        <p><strong>Email:</strong> carlos.ruiz@email.com</p>
                        <p><strong>Teléfono:</strong> 666 789 012</p>
                        <p><strong>Categoría:</strong> Senior</p>
                        <p><strong>Posición:</strong> Apertura</p>
                        <p><strong>Dorsal:</strong> 10</p>
                        <p><strong>Fecha registro:</strong> 05/12/2025</p>
                    </div>
                    <div class="ficha-actions">
                        <button class="btn btn-small btn-secondary" disabled><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>Ya aceptado</button>
                        <button class="btn btn-small btn-info" onclick="verDetalles(2)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>Ver más</button>
                    </div>
                </div>

                <!-- Ficha 3 -->
                <div class="ficha-card">
                    <div class="ficha-header">
                        <h3>Miguel Sánchez Romero</h3>
                        <span class="badge badge-warning">Pendiente</span>
                    </div>
                    <div class="ficha-body">
                        <p><strong>Email:</strong> miguel.sanchez@email.com</p>
                        <p><strong>Teléfono:</strong> 666 345 678</p>
                        <p><strong>Categoría:</strong> Sub-21</p>
                        <p><strong>Posición:</strong> Centro</p>
                        <p><strong>Dorsal:</strong> 12</p>
                        <p><strong>Fecha registro:</strong> 08/12/2025</p>
                    </div>
                    <div class="ficha-actions">
                        <button class="btn btn-small btn-success" onclick="aceptarFicha(3)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>Aceptar</button>
                        <button class="btn btn-small btn-danger" onclick="rechazarFicha(3)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>Rechazar</button>
                        <button class="btn btn-small btn-info" onclick="verDetalles(3)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>Ver más</button>
                    </div>
                </div>

                <!-- Ficha 4 -->
                <div class="ficha-card">
                    <div class="ficha-header">
                        <h3>Alberto Díaz Moreno</h3>
                        <span class="badge badge-danger">Rechazado</span>
                    </div>
                    <div class="ficha-body">
                        <p><strong>Email:</strong> alberto.diaz@email.com</p>
                        <p><strong>Teléfono:</strong> 666 901 234</p>
                        <p><strong>Categoría:</strong> Senior</p>
                        <p><strong>Posición:</strong> Ala</p>
                        <p><strong>Dorsal:</strong> 14</p>
                        <p><strong>Fecha registro:</strong> 03/12/2025</p>
                    </div>
                    <div class="ficha-actions">
                        <button class="btn btn-small btn-secondary" disabled><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>Rechazado</button>
                        <button class="btn btn-small btn-info" onclick="verDetalles(4)"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>Ver más</button>
                    </div>
                </div>
            </div>

            <div class="table-info">
                <p>Total fichas: <strong>4</strong> | Pendientes: <strong>2</strong> | Aceptadas: <strong>1</strong> | Rechazadas: <strong>1</strong></p>
            </div>
        </main>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p>&copy; 2025 Rugby Club Gest</p>
    </footer>

    <script>
        // Cargar fichas desde el backend
        async function cargarFichas() {
            try {
            const response = await fetch('/api/jugadores');
                const jugadores = await response.json();
                
                const fichasGrid = document.getElementById('fichasGrid');
                fichasGrid.innerHTML = '';
                
                jugadores.forEach(jugador => {
                    const ficha = crearFichaHTML(jugador);
                    fichasGrid.innerHTML += ficha;
                });
            } catch (error) {
                console.error('Error cargando fichas:', error);
            }
        }

        function crearFichaHTML(jugador) {
            return `
                <div class="ficha-card">
                    <div class="ficha-header">
                        <h3>${jugador.nombre} ${jugador.apellidos}</h3>
                        <span class="badge badge-warning">Pendiente</span>
                    </div>
                    <div class="ficha-body">
                        <p><strong>Email:</strong> ${jugador.email || 'No especificado'}</p>
                        <p><strong>Teléfono:</strong> ${jugador.telefono || 'No especificado'}</p>
                        <p><strong>Categoría:</strong> ${jugador.categoria || 'No especificado'}</p>
                        <p><strong>Posición:</strong> ${jugador.posicion || 'No especificado'}</p>
                        <p><strong>Dorsal:</strong> ${jugador.dorsal || '-'}</p>
                    </div>
                    <div class="ficha-actions">
                        <button class="btn btn-small btn-success" onclick="aceptarFicha(${jugador.id})"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>Aceptar</button>
                        <button class="btn btn-small btn-danger" onclick="rechazarFicha(${jugador.id})"><svg class="icon-sm" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>Rechazar</button>
                    </div>
                </div>
            `;
        }

        function aceptarFicha(id) {
            if(confirm('¿Aceptar esta ficha de jugador?')) {
                // Aquí llamarás al backend para cambiar estado
                alert('Ficha ' + id + ' aceptada');
                // fetch(`http://localhost:8080/api/jugadores/${id}/aceptar`, { method: 'PUT' });
            }
        }

        function rechazarFicha(id) {
            if(confirm('¿Rechazar esta ficha de jugador?')) {
                alert('Ficha ' + id + ' rechazada');
                // fetch(`http://localhost:8080/api/jugadores/${id}/rechazar`, { method: 'PUT' });
            }
        }

        function verDetalles(id) {
            alert('Ver detalles completos de la ficha ' + id);
        }

        // Cargar fichas al inicio
        window.onload = cargarFichas;
    </script>
</body>
</html>
