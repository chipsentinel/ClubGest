<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrenamientos - Club Gest</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header header-club">
        <div class="header-left">
            <img src="../img/ACG-small-logo.png" alt="Logo Club Gest" class="header-logo">
            <div>
                <h1>Club Gest</h1>
                <p class="header-subtitle">Gestión de Entrenamientos</p>
            </div>
        </div>
        <div class="header-right">
            <span class="user-info">Admin: <strong>Club Deportivo</strong></span>
            <a href="../index.html" class="btn btn-small btn-danger">Salir</a>
        </div>
    </header>

    <!-- NAVBAR la forma mas visual esta en home.html-->
    <nav class="navbar-top">
        <a href="home.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>Inicio</a>
        <a href="convocatorias.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>Convocatorias</a>
        <a href="entrenamientos.html" class="nav-link active"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="5" cy="10" r="2.5"></circle><circle cx="19" cy="10" r="2.5"></circle><line x1="8" y1="10" x2="16" y2="10"></line><path d="M7 5v10M17 5v10"></path></svg>Entrenamientos</a>
        <a href="lesiones.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>Lesiones</a>
        <a href="seguros.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>Seguros</a>
        <a href="fichas.html" class="nav-link"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 3H5c-1 0-2 1-2 2v14c0 1 1 2 2 2h14c1 0 2-1 2-2V5c0-1-1-2-2-2z"></path><path d="M9 7h6M9 11h6M9 15h2"></path></svg>Fichas</a>
    </nav>

    <!-- LAYOUT -->
    <div class="layout-flex">
        <main class="main-content">
            <div class="page-header">
                <h1><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="5" cy="10" r="2.5"></circle><circle cx="19" cy="10" r="2.5"></circle><line x1="8" y1="10" x2="16" y2="10"></line><path d="M7 5v10M17 5v10"></path></svg>Entrenamientos</h1>
                <button class="btn btn-success">+ Nuevo</button>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Hora</th>
                            <th>Tipo</th>
                            <th>Categoría</th>
                            <th>Lugar</th>
                            <th>Asistencia</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="entrenamientosTable"></tbody>
                </table>
            </div>
        </main>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Rugby Club Gest</p>
    </footer>
    <script>
        // Datos de ejemplo. TODO: sustituir por fetch a /api/entrenamientos cuando exista.
        const entrenamientos = [
            { id: 1, fecha: 'Jueves 12 Dic', hora: '18:30', tipo: 'Técnico', categoria: 'Senior', lugar: 'Campo Principal', asistencia: 'Pendiente' },
            { id: 2, fecha: 'Martes 17 Dic', hora: '19:00', tipo: 'Físico', categoria: 'Sub-21', lugar: 'Campo Auxiliar', asistencia: 'Pendiente' },
            { id: 3, fecha: 'Jueves 19 Dic', hora: '18:30', tipo: 'Mixto', categoria: 'Senior', lugar: 'Campo Principal', asistencia: 'No asistiré' }
        ];

        const statusBadge = (estado) => {
            if (estado === 'Asistiré') return '<span class="badge badge-success">Asistiré</span>';
            if (estado === 'No asistiré') return '<span class="badge badge-danger">No asistiré</span>';
            return '<span class="badge badge-warning">Pendiente</span>';
        };

        function renderEntrenamientos() {
            const tbody = document.getElementById('entrenamientosTable');
            tbody.innerHTML = entrenamientos.map((e) => `
                <tr>
                    <td>${e.fecha}</td>
                    <td>${e.hora}</td>
                    <td>${e.tipo}</td>
                    <td>${e.categoria}</td>
                    <td>${e.lugar}</td>
                    <td>${statusBadge(e.asistencia)}</td>
                    <td>
                        <button class="btn btn-small btn-success" onclick="marcarAsistencia(${e.id}, 'Asistiré')">Asistiré</button>
                        <button class="btn btn-small btn-danger" onclick="marcarAsistencia(${e.id}, 'No asistiré')">No asistiré</button>
                    </td>
                </tr>
            `).join('');
        }

        function marcarAsistencia(id, estado) {
            const item = entrenamientos.find((e) => e.id === id);
            if (!item) return;
            item.asistencia = estado;
            renderEntrenamientos();
            // TODO: cuando exista backend, hacer PATCH/PUT a /api/entrenamientos/:id/asistencia
        }

        renderEntrenamientos();
    </script>
</body>
</html>
